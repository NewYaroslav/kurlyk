<!-- HTML header for doxygen 1.11.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kurlyk: kurlyk::HttpRateLimiter Class Reference</title>
<link rel="icon" href="logo.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
	DoxygenAwesomeDarkModeToggle.init()
	DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Kurlyk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classkurlyk_1_1HttpRateLimiter.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkurlyk_1_1HttpRateLimiter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">kurlyk::HttpRateLimiter Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Manages rate limits for HTTP requests, ensuring compliance with set limits.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html">LimitData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores data for an individual rate limit.  <a href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9d84de5d541996f2f6e8b1286854de02" id="r_a9d84de5d541996f2f6e8b1286854de02"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d84de5d541996f2f6e8b1286854de02">create_limit</a> (long requests_per_period, long period_ms)</td></tr>
<tr class="memdesc:a9d84de5d541996f2f6e8b1286854de02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new rate limit with specified parameters.  <br /></td></tr>
<tr class="separator:a9d84de5d541996f2f6e8b1286854de02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b0ae8afc3a8d16afaf948d541565cb4" id="r_a1b0ae8afc3a8d16afaf948d541565cb4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b0ae8afc3a8d16afaf948d541565cb4">remove_limit</a> (long limit_id)</td></tr>
<tr class="memdesc:a1b0ae8afc3a8d16afaf948d541565cb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a rate limit with the specified ID.  <br /></td></tr>
<tr class="separator:a1b0ae8afc3a8d16afaf948d541565cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2683750241817e3e26885d5a755ea81c" id="r_a2683750241817e3e26885d5a755ea81c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2683750241817e3e26885d5a755ea81c">allow_request</a> (long general_rate_limit_id, long specific_rate_limit_id)</td></tr>
<tr class="memdesc:a2683750241817e3e26885d5a755ea81c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a request is allowed under the specified general and specific rate limits.  <br /></td></tr>
<tr class="separator:a2683750241817e3e26885d5a755ea81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a335ca05cd7a5141f4e2750af5fc3ba63" id="r_a335ca05cd7a5141f4e2750af5fc3ba63"><td class="memTemplParams" colspan="2">template&lt;typename Duration = std::chrono::milliseconds&gt; </td></tr>
<tr class="memitem:a335ca05cd7a5141f4e2750af5fc3ba63"><td class="memTemplItemLeft" align="right" valign="top">Duration&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a335ca05cd7a5141f4e2750af5fc3ba63">time_until_next_allowed</a> (long general_rate_limit_id, long specific_rate_limit_id)</td></tr>
<tr class="memdesc:a335ca05cd7a5141f4e2750af5fc3ba63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the delay until the next request is allowed under the specified rate limits.  <br /></td></tr>
<tr class="separator:a335ca05cd7a5141f4e2750af5fc3ba63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70b2b7c223520c542ef90c417ad281e4" id="r_a70b2b7c223520c542ef90c417ad281e4"><td class="memTemplParams" colspan="2">template&lt;typename Duration = std::chrono::milliseconds&gt; </td></tr>
<tr class="memitem:a70b2b7c223520c542ef90c417ad281e4"><td class="memTemplItemLeft" align="right" valign="top">Duration&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a70b2b7c223520c542ef90c417ad281e4">time_until_any_limit_allows</a> ()</td></tr>
<tr class="memdesc:a70b2b7c223520c542ef90c417ad281e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the shortest delay among all active rate limits.  <br /></td></tr>
<tr class="separator:a70b2b7c223520c542ef90c417ad281e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a26bad67a0d2892271ae462119f516911" id="r_a26bad67a0d2892271ae462119f516911"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a26bad67a0d2892271ae462119f516911">time_point_t</a> = std::chrono::steady_clock::time_point</td></tr>
<tr class="separator:a26bad67a0d2892271ae462119f516911"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6d4a373a25b2250e23dba361c69e10e1" id="r_a6d4a373a25b2250e23dba361c69e10e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6d4a373a25b2250e23dba361c69e10e1">check_limit</a> (<a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html">LimitData</a> &amp;limit_data, const <a class="el" href="#a26bad67a0d2892271ae462119f516911">time_point_t</a> &amp;now)</td></tr>
<tr class="memdesc:a6d4a373a25b2250e23dba361c69e10e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a request is allowed under the specified rate limit without updating the count.  <br /></td></tr>
<tr class="separator:a6d4a373a25b2250e23dba361c69e10e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ad668b032a7d05334ca5101308c804e" id="r_a7ad668b032a7d05334ca5101308c804e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ad668b032a7d05334ca5101308c804e">update_limit</a> (<a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html">LimitData</a> &amp;limit_data, const <a class="el" href="#a26bad67a0d2892271ae462119f516911">time_point_t</a> &amp;now)</td></tr>
<tr class="memdesc:a7ad668b032a7d05334ca5101308c804e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the request count for the specified rate limit.  <br /></td></tr>
<tr class="separator:a7ad668b032a7d05334ca5101308c804e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0d76b568d7a09f461b454c95698fa3a" id="r_ad0d76b568d7a09f461b454c95698fa3a"><td class="memTemplParams" colspan="2">template&lt;typename Duration&gt; </td></tr>
<tr class="memitem:ad0d76b568d7a09f461b454c95698fa3a"><td class="memTemplItemLeft" align="right" valign="top">Duration&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#ad0d76b568d7a09f461b454c95698fa3a">time_until_limit_allows</a> (const <a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html">LimitData</a> &amp;limit_data, const <a class="el" href="#a26bad67a0d2892271ae462119f516911">time_point_t</a> &amp;now) const</td></tr>
<tr class="memdesc:ad0d76b568d7a09f461b454c95698fa3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the delay required before a request is allowed under a single rate limit.  <br /></td></tr>
<tr class="separator:ad0d76b568d7a09f461b454c95698fa3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad0e052576e8161b02c17bdbd07d29c72" id="r_ad0e052576e8161b02c17bdbd07d29c72"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad0e052576e8161b02c17bdbd07d29c72">m_mutex</a></td></tr>
<tr class="memdesc:ad0e052576e8161b02c17bdbd07d29c72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex to protect shared data.  <br /></td></tr>
<tr class="separator:ad0e052576e8161b02c17bdbd07d29c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b0f9f7a10cf2df242e9993ffe67d47c" id="r_a2b0f9f7a10cf2df242e9993ffe67d47c"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b0f9f7a10cf2df242e9993ffe67d47c">m_next_id</a> = 1</td></tr>
<tr class="memdesc:a2b0f9f7a10cf2df242e9993ffe67d47c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Next available unique ID for rate limits.  <br /></td></tr>
<tr class="separator:a2b0f9f7a10cf2df242e9993ffe67d47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03327dd013d59e6378e41f787339da64" id="r_a03327dd013d59e6378e41f787339da64"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; long, <a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html">LimitData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a03327dd013d59e6378e41f787339da64">m_limits</a></td></tr>
<tr class="memdesc:a03327dd013d59e6378e41f787339da64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map storing rate limit configurations.  <br /></td></tr>
<tr class="separator:a03327dd013d59e6378e41f787339da64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages rate limits for HTTP requests, ensuring compliance with set limits. </p>
<p>Each rate limit is assigned a unique identifier, allowing specific limits to be applied to different request streams. This class controls the rate of requests by monitoring the number of requests within a specified time window. </p>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00016">16</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a26bad67a0d2892271ae462119f516911" name="a26bad67a0d2892271ae462119f516911"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26bad67a0d2892271ae462119f516911">&#9670;&#160;</a></span>time_point_t</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#a26bad67a0d2892271ae462119f516911">kurlyk::HttpRateLimiter::time_point_t</a> = std::chrono::steady_clock::time_point</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00144">144</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2683750241817e3e26885d5a755ea81c" name="a2683750241817e3e26885d5a755ea81c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2683750241817e3e26885d5a755ea81c">&#9670;&#160;</a></span>allow_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool kurlyk::HttpRateLimiter::allow_request </td>
          <td>(</td>
          <td class="paramtype">long</td>          <td class="paramname"><span class="paramname"><em>general_rate_limit_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long</td>          <td class="paramname"><span class="paramname"><em>specific_rate_limit_id</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if a request is allowed under the specified general and specific rate limits. </p>
<p>This method checks both the general and specific rate limits without updating their counters unless the request is allowed under both limits. If the request is allowed, it updates the counters accordingly. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">general_rate_limit_id</td><td>Unique identifier for the general rate limit. </td></tr>
    <tr><td class="paramname">specific_rate_limit_id</td><td>Unique identifier for the specific rate limit. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the request is allowed under both limits, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00052">52</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<a id="a6d4a373a25b2250e23dba361c69e10e1" name="a6d4a373a25b2250e23dba361c69e10e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d4a373a25b2250e23dba361c69e10e1">&#9670;&#160;</a></span>check_limit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool kurlyk::HttpRateLimiter::check_limit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html">LimitData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>limit_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#a26bad67a0d2892271ae462119f516911">time_point_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>now</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if a request is allowed under the specified rate limit without updating the count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">limit_data</td><td>Reference to the <a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html" title="Stores data for an individual rate limit.">LimitData</a> for the rate limit. </td></tr>
    <tr><td class="paramname">now</td><td>The current time point. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the request is allowed, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00163">163</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<a id="a9d84de5d541996f2f6e8b1286854de02" name="a9d84de5d541996f2f6e8b1286854de02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d84de5d541996f2f6e8b1286854de02">&#9670;&#160;</a></span>create_limit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long kurlyk::HttpRateLimiter::create_limit </td>
          <td>(</td>
          <td class="paramtype">long</td>          <td class="paramname"><span class="paramname"><em>requests_per_period</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long</td>          <td class="paramname"><span class="paramname"><em>period_ms</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new rate limit with specified parameters. </p>
<p>This method initializes a new rate limit and returns its unique identifier. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requests_per_period</td><td>Maximum number of requests allowed within the time period. A value of 0 means no limit is applied. </td></tr>
    <tr><td class="paramname">period_ms</td><td>Duration of the time period in milliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Unique identifier for the created rate limit. </dd></dl>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00024">24</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<a id="a1b0ae8afc3a8d16afaf948d541565cb4" name="a1b0ae8afc3a8d16afaf948d541565cb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b0ae8afc3a8d16afaf948d541565cb4">&#9670;&#160;</a></span>remove_limit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool kurlyk::HttpRateLimiter::remove_limit </td>
          <td>(</td>
          <td class="paramtype">long</td>          <td class="paramname"><span class="paramname"><em>limit_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes a rate limit with the specified ID. </p>
<p>This method allows the removal of an existing rate limit by its unique identifier. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">limit_id</td><td>The unique identifier of the rate limit to remove. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the rate limit was removed successfully, false if the ID was not found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00040">40</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<a id="a70b2b7c223520c542ef90c417ad281e4" name="a70b2b7c223520c542ef90c417ad281e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70b2b7c223520c542ef90c417ad281e4">&#9670;&#160;</a></span>time_until_any_limit_allows()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Duration = std::chrono::milliseconds&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Duration kurlyk::HttpRateLimiter::time_until_any_limit_allows </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds the shortest delay among all active rate limits. </p>
<p>Returns the minimum duration until any of the rate limits allows a request. If all limits are currently available, returns zero.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Duration</td><td>The chrono duration type (e.g., std::chrono::milliseconds, std::chrono::microseconds). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The shortest wait duration among all limits. Zero if no wait is required. </dd></dl>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00126">126</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<a id="ad0d76b568d7a09f461b454c95698fa3a" name="ad0d76b568d7a09f461b454c95698fa3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0d76b568d7a09f461b454c95698fa3a">&#9670;&#160;</a></span>time_until_limit_allows()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Duration&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Duration kurlyk::HttpRateLimiter::time_until_limit_allows </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html">LimitData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>limit_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#a26bad67a0d2892271ae462119f516911">time_point_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>now</em></span>&#160;) const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the delay required before a request is allowed under a single rate limit. </p>
<p>If the request exceeds the allowed number within the configured period, returns the remaining time until the rate limit resets. Otherwise returns zero. The time unit is determined by the template argument.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Duration</td><td>Duration type (e.g., std::chrono::milliseconds, std::chrono::microseconds). </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">limit_data</td><td>Internal data for the rate limit being evaluated. </td></tr>
    <tr><td class="paramname">now</td><td>Current timestamp to compare against the rate period start time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Duration to wait until the rate limit allows a request. Zero if already allowed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00204">204</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<a id="a335ca05cd7a5141f4e2750af5fc3ba63" name="a335ca05cd7a5141f4e2750af5fc3ba63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a335ca05cd7a5141f4e2750af5fc3ba63">&#9670;&#160;</a></span>time_until_next_allowed()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Duration = std::chrono::milliseconds&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Duration kurlyk::HttpRateLimiter::time_until_next_allowed </td>
          <td>(</td>
          <td class="paramtype">long</td>          <td class="paramname"><span class="paramname"><em>general_rate_limit_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long</td>          <td class="paramname"><span class="paramname"><em>specific_rate_limit_id</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the delay until the next request is allowed under the specified rate limits. </p>
<p>Computes the maximum wait time between the general and specific limits. Ensures that a request is only allowed when <b>all</b> applicable limits permit it.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Duration</td><td>Duration type (e.g., std::chrono::milliseconds, std::chrono::microseconds). </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">general_rate_limit_id</td><td>ID of the general rate limit. </td></tr>
    <tr><td class="paramname">specific_rate_limit_id</td><td>ID of the specific rate limit. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Duration to wait before the request is safe to perform. Zero if already allowed by both limits. </dd></dl>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00100">100</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<a id="a7ad668b032a7d05334ca5101308c804e" name="a7ad668b032a7d05334ca5101308c804e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ad668b032a7d05334ca5101308c804e">&#9670;&#160;</a></span>update_limit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void kurlyk::HttpRateLimiter::update_limit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html">LimitData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>limit_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#a26bad67a0d2892271ae462119f516911">time_point_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>now</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the request count for the specified rate limit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">limit_data</td><td>Reference to the <a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html" title="Stores data for an individual rate limit.">LimitData</a> for the rate limit. </td></tr>
    <tr><td class="paramname">now</td><td>The current time point. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00182">182</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a03327dd013d59e6378e41f787339da64" name="a03327dd013d59e6378e41f787339da64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03327dd013d59e6378e41f787339da64">&#9670;&#160;</a></span>m_limits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;long, <a class="el" href="structkurlyk_1_1HttpRateLimiter_1_1LimitData.html">LimitData</a>&gt; kurlyk::HttpRateLimiter::m_limits</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map storing rate limit configurations. </p>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00157">157</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<a id="ad0e052576e8161b02c17bdbd07d29c72" name="ad0e052576e8161b02c17bdbd07d29c72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0e052576e8161b02c17bdbd07d29c72">&#9670;&#160;</a></span>m_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex kurlyk::HttpRateLimiter::m_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex to protect shared data. </p>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00155">155</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<a id="a2b0f9f7a10cf2df242e9993ffe67d47c" name="a2b0f9f7a10cf2df242e9993ffe67d47c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b0f9f7a10cf2df242e9993ffe67d47c">&#9670;&#160;</a></span>m_next_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long kurlyk::HttpRateLimiter::m_next_id = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Next available unique ID for rate limits. </p>

<p class="definition">Definition at line <a class="el" href="HttpRateLimiter_8hpp_source.html#l00156">156</a> of file <a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/kurlyk/http/HttpRequestManager/<a class="el" href="HttpRateLimiter_8hpp_source.html">HttpRateLimiter.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekurlyk.html">kurlyk</a></li><li class="navelem"><a class="el" href="classkurlyk_1_1HttpRateLimiter.html">HttpRateLimiter</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
